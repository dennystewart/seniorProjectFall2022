"use strict";var express=require("express"),mongoose=require("mongoose"),morgan=require("morgan"),cors=require("cors");require("dotenv").config();var _require=require("tedious"),Connection=_require.Connection,Request=_require.Request,path=require("path"),axios=require("axios"),bodyParser=require("body-parser"),formRouters=require("./routers/formRouter"),opportunityRouter=require("./routers/opportunityRouter"),app=express();app.use(express.json()),app.set("view engine","pug"),app.use(urlencodedParser=bodyParser.urlencoded({extended:!1})),app.use(express.static(__dirname)),app.use("/",formRouters),app.use("/opportunity",opportunityRouter);var port=process.env.PORT||3e3,server=app.listen(port,function(){return console.log("server is running on port ".concat(port))}),config={authentication:{options:{userName:"azureuserD4C",password:"D4Change123"},type:"default"},server:"dreamweeksqlserver.database.windows.net",options:{database:"dreamweekDatabase",encrypt:!0}},connection=new Connection(config);function queryDatabase(){console.log("Reading rows from the Table...");var e=new Request("SELECT * FROM SalesLT.Customer",function(e,r){e?console.error(e.message):console.log("".concat(r," row(s) returned"))});e.on("row",function(e){e.forEach(function(e){console.log("%s\t%s",e.metadata.colName,e.value)})}),connection.execSql(e),app.use(morgan("dev")),app.use(cors({orgin:!0,credentials:!0}));var r=require("./routers/test");app.use("/",r)}connection.on("connect",function(e){e?console.error(e.message):(console.log("DATABASE CONNECTED"),queryDatabase())}),connection.connect(),app.get("/",function(e,r){r.render("home",{title:"Home"})});
//# sourceMappingURL=index.min.js.map
